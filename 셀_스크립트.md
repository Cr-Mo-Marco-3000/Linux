# 셸 스크립트

## 1.

### I. 셸의 개념과 기능

- 셸은 사용자에게 입력한 명령을 해석하여 커널에게 전달하거나 커널의 처리결과를 사용자에게 전달하는 역할을 수행
- 셸은 명령어 해석 기능, 프로그래밍 기능, 사용자 환경 변수 설정 기능 등의 세 가지 기능을 가지고 있음

### II. bash의 주요한 환경 변수와 의미

- 기본적으로 갖고 있는 경로 및 환경변수

![image-20230113083950670](C:\Users\User\Desktop\Linux\셀_스크립트.assets\image-20230113083950670.png)

### III. export: 환경 변수 설정 명령

- 환경 변수를 설정하기 위해서는 먼저 셸 변수를 정의하고 export 명령을 사용하여 설정된 환경변수를 변경
- `$ export 환경변수 = 값`
  - 환경 변수 값을 변경
- `$ unset 변수명`
  - 정의된 변수 해제



### IV. 셸 스크립트의 특징

- 셸 스크립트는 셸이나 커맨드라인 인터프리터에서 수행하도록 작성되었거나 운영체제를 위해 사용된 스크립트를 의미
- 단순한 도메인 고유 언어로 여겨지기도 하며 셸 스크립트가 수행하는 일반적인 기능은 파일 이용, 프로그램 실행, 문자열 출력
- CentOS에서 기본적으로 사용하는 기본 셸은 배시(bash) 셸이며 bash의 특징은 명령어 단축기능, 사용했던 명령어를 다시 불러와서 사용할 수 있는 history 기능, 연산 기능, 작업 컨트롤 기능, tab키를 눌러 완성하는 자동 이름 완성 기능, 프롬프트 제어 기능, 명령 편집 기능 등을 수행

#### 1) 셸 스크립트의 장점

#### 2) 셸 스크립트의 단점

- 실행되는 각 명령에 대한 잠재적으로 새로운 하부 프로세스가 수많이 필요하게 됨에 따라 속도가 느려질 수 있음
- 다양한 종류의 유닉스, 리눅스, BSD운영체제, thereof 버전, 시스템 유틸리티와의 호환성은 제공되지만 더 복잡한 셸 스크립트의 경우에는 셸, 유틸리티 등 다른 필수 요소와의 차이로 인해 실패할 가능성이 존재하고 셸이 문제를 개선할 목적으로 고품질의 코드와 확장을 기록하기에는 다소 힘들다는 단점도 존재
  - 즉, 문법이 어려워서 셸 스크립트 프로그래밍은 임베디드 등의 분야에서 제한적으로 사용됨



## 2. 셸 스크립트 프로그래밍

### I. 셸 출력 명령

- 터미널 창에서 문자열을 출력하는 리눅스 배시 셸의 출력 명령에는 echo 명령과 printf 명령이 있음



#### 1) echo

- $변수 로 변수 출력 가능
  - 환경변수도 출력 가능
- \n 등 이스케이프 시퀀스 사용 가능

#### 2) printf

- print format

- 출력형식을 %d 지시자와 \n 줄 바꿈 문자 등 C언어에서 사용하는 출력함수인 printf() 함수의 형식을 지정하여 출력
- %d
  - digit
  - 숫자를 여기에 넣겠습니다.



### II. 셸 스크립트 작성과 실행

- 셸 스크립트 프로그램을 작성하는 방법은 주로 gedit나 vi 에디터를 사용하며 여기서는 주로 gedit를 사용하여 셸 스크립트를 작성
- 저장할 때 파일명 끝에는 셸 스크립트 파일임을 나타내기 위해 .sh를 붙여서 저장
- 셸 스크립트 파일을 실행하면 위에서 아래, 왼쪽에서 오른쪽으로 내부의 코드들을 실행

### III. 변수 선언 사용

- C, C++, Java등의 프로그래밍에서는 변수를 사용하기 전에 먼저 변수를 선언하였지만 셸 스크립트는 변수를 사용하기 전 먼저 변수를 선언하지 않고 파이썬같이 변수에 처음 값이 할당되면 그 때 자동으로 변수가 생성됨

- 변수 선언 시 알파벳 대/소문자를 엄격하게 구별하며 변수에 값을 대입할 때 '=' 좌우에 공백이 존재해서는 안됨

- 변수 선언 예시
  - var1 = HI
    - 에러
      - = 좌우에 공백 존재
  - var2=good
  - var3=Nice Day
    - 에러
      - 두 개의 문자열인 경우 큰따옴표로 묶어야 함
  - var4="good Morning"
  - var5=88+95
    - 에러는 없지만 연산은 안 됨
      - 문자열로 취급
	

### IV. 숫자 계산

- 셸 스크립트는 모든 변수를 문자열로 처리

- 따라서 연산을 수행하기 위해서는 키워드 expr을 사용해야 함
- 연산식을 사용할 때는 `과 expr을 공백 없이 붙여 사용해야 하며 역따옴표로 연산식의 시작과 끝을 묶어줘야 함
- 연산식에서 괄호를 사용하려면 괄호 앞에 \를 반드시 붙여줘야 함
- 사칙연산 중에서 * 앞에도 \를 반드시 붙여줘야함



### V. 파라미터 변수

- 파라미터 변수는 자신이 실행한 명령어의 파라미터(매개변수)



### VI. 분기문과 관계 연산자

- 분기문은 프로그램의 흐름을 순차적으로 수행하다가 조건 또는 주어진 이유에 따라 다른 곳으로 흐름을 유도하는 구문을 의미
  - 분기문은 조건문과 반복문으로 구성

- 관계 연산자는 비교 연산자라고도 한다.



#### 1) if문

![image-20230113104508559](C:\Users\User\Desktop\Linux\셀_스크립트.assets\image-20230113104508559.png)



#### 2) 비교 연산자

![image-20230113104849970](C:\Users\User\Desktop\Linux\셀_스크립트.assets\image-20230113104849970.png)

![image-20230113104905195](C:\Users\User\Desktop\Linux\셀_스크립트.assets\image-20230113104905195.png)



#### 3) 파일관련 조건

- 암기는 하지 말고 필요할 때 찾아볼것

![image-20230113105131188](C:\Users\User\Desktop\Linux\셀_스크립트.assets\image-20230113105131188.png)



#### 4) case ~ esac문



#### 5) 관계 연산자

- AND
  - -a
  - &&
- OR
  - -o
  - ||



#### 6) for 반복문



#### 7) until 문

- 조건이 거짓일때 명령을 수행



### 함수

- 함수는 특정 목적을 수행하는 프로그램 모듈을 의미



> 참고: 자바 환경 변수 설정
>
> 자바 설치 후, 시스템 환경변수의 Path에 java 설치폴더의 bin/ 디렉토리를 등록해 주어야 한다



> 참고: 자바 리눅스 설치
>
> 1. yum을 통해 설치(list grep으로 확인)
>
> 2. which java를 통해 java 명령어의 위치 확인
>
> 3. `# vi /etc/profile` 실행(루트 계정에서 모든 사용자가 사용할 수 있는 환경변수 설정)
>
> 4. 아래 코드 추가
>
>    ```bash
>    export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.352.b08-2.el7_9.x86_64
>    export PATH=$JAVA_HOME/bin:$PATH
>    ```
>
> 5. `# source /etc/profile` 실행
> 6. `# reboot` 실행



> 참고: 바로가기 원본 경로 찾기
>
> readlink 명령
>
> 
>
> root에 적용되는 설정값 => 모든 사용자에 적용
>
> /etc/profile
>
> /etc/bashrc
>
> 각 사용자에 적용되는 설정값
>
> ./.bashrc
>
> ./bash_profile
>
> - rm에 -i 추가 등 alias 설정하는 파일
>
> 각 설정값 적용은 위에서 아래로



> 자바 파일 리눅스 실행
>
> 1. `$ vi Hello.java` 를 통해 파일 생성
> 2. 내부에 코드 작성
> 3. 저장
> 4. javac로 컴파일(`$ javac hello.java`)
> 5. java로 실행(`$ java hello`)

11-2

practice1.sh

```bash
#! /bin/sh

blood=$1

flag=1
while [ $flag=1 ]
do
    case $blood in
        O|o)
            echo "O형을 선택하였습니다."
            break;;
        B|b)
            echo "B형을 선택하였습니다."
            break;;
        A|a)
            echo "A형을 선택하였습니다."
            break;;
        AB|ab|Ab|aB)
            echo "AB형을 선택하였습니다."
            break;;
        *)
            echo "다시 입력하세요"
            read blood;;
        esac
done

echo '프로그램을 종료합니다.'

```



11-3

practice2

```bash
#! /bin/sh

hap () {
  total=`expr $1 + $2`
  echo $total
}


cha () {
  total=`expr $1 - $2`
  echo $total
}



operator=$1

if [ $operator = 1 ]

then

echo "숫자 두 개를 입력해주세요."
read num1 num2
case $operator in
  1)
    hap $num1 $num2
    ;;
  2)
    cha $num1 $num2
    ;;
esac
fi
```





1. ~ 오늘 오전까지 학습 내용을 바탕으로 문제 제출하기
   - 20문제 + 답
   - practice3.doc