# 파일 속성과 접근 권한

[toc]

## 1. 파일 속성

- 리눅스 시스템에서 사용되는 파일은 크게 디렉터리와 파일로 구성
- 다중 시스템으로 접근 권한을 부여하여 미인가자가 임의로 파일에 접근하더라도 훼손할 수 없도록 보안기능 제공

### I. 파일 상세정보 출력

#### 1) 속성 출력 예시

- `- rw-rw-r--. 1 myUser myGroup  215 12월 4 15:35 filename.txt`
  - `$ ls -l filename.txt `로 출력

- 설명(좌측부터 순서대로)
  1. 파일 종류
  2. 파일 접근 권한
  3. 하드링크 수
  4. 파일 소유자의 로그인 ID
  5. 파일 소유자의 그룹 이름
  6. 파일 크기(byte단위)
  7. 파일 최종 수정 일자와 시각
  8. 파일명



#### 2) 속성 상세 설명

1. 파일의 종류
   - 파일 속성의 첫 번째 항목
   - `-`
     - 일반 파일
   - `d`
     - 디렉터리
   - 파일의 종류를 확인하기 위한 명령
     - `$ file 디렉터리및파일명`

2. 파일의 접근 권한

   - 순서대로 소유자 접근 권한, 그룹 접근 권한, 기타 사용자 접근 권한

   - 하단에서 상세 설명

3. 하드 링크의 수
   - 이전 문서 참조

4. 파일 소유자의 로그인 ID
   - 리눅스 시스템에서 취급되는 모든 파일에는 각각의 소유자가 지정되어 있음
   - 시스템과 관련된 파일은 대부분 루트계정이 소유자이고 일반 파일은 해당 파일을 생성한 사용자가 파일의 소유자가 됨
   - 예시에서 filename.txt파일은 사용자 계정 myUser 아이디로 접속한 상태에서 생성한 파일이므로 소유자의 로그인 ID는 myUser로 출력됨

5. 파일 소유자의 그룹 이름
   - 시스템 관리자가 사용자를 등록할 때 파일 소유자의 그룹이 결정
   - 임의로 소유자가 속할 그룹을 바꿀 수는 없으며 변경하고자 할 경우에는 반드시 시스템 관리자에게 그룹 변경을 요청해야 함
   - 그룹 변경에 대한 정의는 /etc/group 디렉터리에서 관리
   - 현재 접속 중인 사용자가 속한 그룹 조회 명령어
     - `$ groups [옵션] [사용자명]`

6. 파일 크기
   - byte 단위

7. 파일 최종 수정 날짜와 시각

   - 파일이 마지막으로 수정된 일자와 시각 표시
   - 연도가 표시되지 않는 경우 올해를 의미

8. 파일명

   - 실질적으로 사용되고 있는 파일명
   - 파일의 종류에 따라 디렉터리 또는 파일의 이름으로 출력



---



## 2. 파일 접근 권한

### I. 파일 접근 권한의 종류

- 리눅스 시스템에서 사용되는 파일에 대한 접근 권한은 읽기, 쓰기, 실행 권한 등 3가지 권한으로 구성
- 중요!

| 접근 권한 | 파일                                                         | 디렉터리                                                     |
| --------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 읽기(r)   | 해당 파일을 읽거나 복사 가능                                 | ls 명령으로 디렉터리의 목록을 확인(옵션은 실행 권한이 있을 경우에만 허용) |
| 쓰기(w)   | 파일을 수정, 이동, 삭제 가능(디렉터리에 쓰기 권한이 있어야 함) | 해당 파일 삭제, 생성 가능                                    |
| 실행(x)   | 셸 스크립트, 또는 실행파일에 대한 실행 가능                  | cd 명령을 통해 이동 및 파일을 디렉터리로 이동 또는 복사 가능 |



### II. 접근 권한 표기방법

- 출력
  - `rwx rwx rwx`

- 보는 방법
  - `$ ls -l` 로 속성을 표시했을 때 출력

- 앞에서부터 3개씩 끊어서 소유자 접근 권한, 그룹 접근 권한, 기타 사용자 접근 권한을 표시
- 해당 권한이 있으면 알파벳으로, 없으면 `-`으로 표시
- 각 접근 권한은 다음과 같이 나뉨
  - r
    - 읽기
  - w
    - 쓰기
  - x
    - 실행

### III. 접근 권한 변경 명령: chmod

- 접근 권한 변경은 파일 소유자와 시스템 관리자만 가능

- `$ chmod [옵션] 모드[,모드] [파일]`
  - 접근 권한 변경 명령어
  - **ch**ange **mod**e의 약자
    - 모드란, 여러 방법으로 나타낸 파일 접급권한 
  - 옵션
    - -R
      - 하위 디렉터리까지 접근 권한을 모두 변경



## 3. 기호를 이용한 접근 권한

### I. 심볼릭 모드

- 기호를 이용한 접근 권한 변경 방법
- 사용자 카테고리 문자 + 연산자 기호 + 접근권한 문자의 조합으로 파일 접근권한 변경

### II. 심볼릭 모드를 통한 접근 권한 변경

- 심볼릭 모드에서 사용되는 문자와 기호

  ![image-20230111164001603](C:\Users\User\Desktop\Linux\파일_속성_접근권한.assets\image-20230111164001603.png)

- 심볼릭 모드 접근권한 변경 예시

![image-20230111164049328](C:\Users\User\Desktop\Linux\파일_속성_접근권한.assets\image-20230111164049328.png)



---



## 4. 숫자를 이용한 접근 권한

### I. 숫자 모드

- 접근 권한을 조정할 때 보다 간편하게 숫자를 사용하는 방법
- 이진수를 팔진수로 바꾼 숫자의 자리수로 각각의 권한을 나타냄
  - 예시
    - 111 111 111 => 777
    - 101 011 001 => 531
  
  - 소유자 권한(백의 자리)
  - 그룹 권한(십의 자리)
  - 기타 사용자 권한(일의 자리)
  



### II. 숫자를 통한 접근 권한 변경

- `$ chmod 숫자모드 파일명`





---



## 5. 기본 접근 권한

- 마스크 값 적용 표
  - 파일은 
  - 디렉토리는 마스크 값 그대로 뺀 값이 적용

| 마스크 값            | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| -------------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 파일의 기본 권한     | 6    | 6    | 4    | 4    | 2    | 2    | 0    | 0    |
| 디렉토리의 기본 권한 | 7    | 6    | 5    | 4    | 3    | 2    | 1    | 0    |

  - 실제 예시
    - 위부터 umask를 0부터 1씩 늘린 후 파일과 디렉토리를 만들었을 경우

![image-20230111163304673](C:\Users\User\Desktop\Linux\파일_속성_접근권한.assets\image-20230111163304673.png)



- **파일 접근 권한**
  - r w x
  - 읽기
    - 파일
      - 읽거나 복사 가능
    - 디렉터리
      - ls 명령으로 디렉터리의 목록을 확인
      - 옵션은 실행권한이 있을 경우만 허용
  - 쓰기
    - 파일
      - 파일을 수정, 이동, 삭제 가능
      - 디렉터리에 쓰기 권한 있어야 함
    - 디렉터리
      - 해당 파일을 삭제하거나 생성할 수 있음
  - 실행
    - 파일
      - 셸 스크립트, 또는 실행파일 실행 가능
    - 디렉터리
      - cd 명령 사용 가능하며 파일을 디렉터리로 이동 또는 복사 가능
- 접근 권한 변경 명령
  - chmod
  - change mode
  - 접근 권한 변경은 **파일 소유자**와 **시스템 관리자**만 변경 가능
  - `chmod 명령어 파일`

### 기호를 이용한 접근 권한

- 심볼릭 모드

- 바꾸면 하드링크된 파일도 같이 권한 변경

- test_hosts 파일의 권한을
  1. 기타 사용자에게는 쓰기 권한 부여
  2. u 실행 권한 부여
  3. 그룹 사용자에게는 r 권한 제거

### 숫자를 이용한 접근 권한

- 숫자 모드
  - 접근 권한을 조정할 때 문자의 조합은 다소 많아지므로 복잡해지는 단점을 해결하기 좋은 방법인 숫자 모드 활용

### 기본 접근 권한

- 파일과 디렉터리에 대한 기본 접근 권한은 리눅스 시스템에 설정된 기본 값에 따라 자동으로 설정됨

- mask

  - 부여하지 않을 권한에 대한 지정
  - -S 옵션
    - 실제 적용되는 권한 

  - 파일과 디렉터리의 기본권한이 다르기 때문에, 마스크값에 따른 숫자도 다르다(표5-7)



### 특수 접근 권한

- 특정 파일에

- sticky bit
  - 디렉터리에만 가능한 권한 설정



- 표 5-7에서 디렉터리의 기본권한 7부터 1씩 순차적으로 줄어듦



`$ chmod 777`