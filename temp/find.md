# find

## I. 기본 사용법

`find [옵션: 생략가능] [대상경로: 생략가능] [표현식]`

- 대상 경로는 기본적으로 현재 디렉터리를 가리킨다
- 표현식은 테스트, 연산자, 액션 및 위치옵션으로 구성될 수 있다.
- 예제
  1. `find /etc -name chrony.conf`
      - /etc:경로, -name chrony.conf: 표현식
      - /etc에서 chrony.conf 파일을 찾음
  2. `find -L /etc -perm 644 -name 'rc.*`
      - /etc에서 심볼릭 링크 원파일의 속성을 검사하는데(-L) 644 파일권한을 갖고, rc.로 시작하는 파일을 찾음
      - /etc/rc.local의 권한은 777이지만, 원파일인  /etc/rc.d/rc.local의 권한은 644이기 때문에 둘 다 찾음

## II. find의 다양한 표현식

- find에서는 기존 명령어에 쓰이던 옵션뿐 아니라, 사용자가 필요로 하는 조건으로 파일을 찾기 위한 방법을 표현식으로 제공한다.
- 표현식에는 다음 4가지가 있다.
  - Tests: 테스트, 파일의 속성을 정의
  - Operators: 연산자, 테스트의 검색 우선순위를 정의
  - Actions: 액션, 검색한 파일을 인수로 하여 또 다른 명령어를 실행
  - Positional Options: 위치옵션, 테스트의 검색조건을 변경

### 1. 테스트

> - find에서 가장 많이 사용되는 표현식
> - 다음과 같은 다양한 테스트가 있다.
> - 시간 관련 테스트
> - 최신 파일 검색 관련 테스트
> - 파일 권한 관련 테스트
> - 그룹 및 사용자 관련 테스트
> - 파일명 관련 테스트
> - 파일 경로 관련 테스트
> - 파일 타입 관련 테스트
> - 기타 테스트

### 2. 연산자

#### 1) 시간 관련 테스트

- 현재 시간을 기준으로 특정 시간 구간에 동작이 행해진 파일을 찾음

- 정리
  - access(접근) 관련
    - `-amin n`: 현재 시각을 기준으로 n분전 이후부터 1분 내에(n분전 ~ n-1분전) **액세스**된 파일을 찾아줌
    - `-atime n`: 현재 시각을 기준으로 (n + 1) X 24시간 전부터 이후 24시간 내에((n + 1) X 24시간 전 ~ n X 24시간 전) **액세스**된 파일을 찾아줌
  - change(변경) 관련
    - `-cmin n`: 현재 시각을 기준으로 n분전 이후부터 1분 내에(n분전 ~ n-1분전) **변경된** 파일을 찾아줌
    - `-ctime n`: `-atime n`: 현재 시각을 기준으로 (n + 1) X 24시간 전부터 이후 24시간 내에((n + 1) X 24시간 전 ~ n X 24시간 전) **변경된** 파일을 찾아줌
  - modified(수정) 관련
    - `-mmin n`: 현재 시각을 기준으로 n분전 이후부터 1분 내에(n분전 ~ n-1분전) **수정된** 파일을 찾아줌
    - `-mtime n`: `-atime n`: 현재 시각을 기준으로 (n + 1) X 24시간 전부터 이후 24시간 내에((n + 1) X 24시간 전 ~ n X 24시간 전) **수정된** 파일을 찾아줌

- 참고: 변경과 수정의 차이  
  - 변경과 수정은 거의 비슷하지만, 파일명의 변화를 포함하는 것이 변경(Change), 포함하지 않는것이 수정(Modify)
    - 즉 파일명이 바뀔 경우에는 변경과 수정이 둘 다 일어나지만, 파일내용이 바뀔때는 수정만 일어난다.

- 예시
  - 1분 안에 변경된 파일을 검색하려면 `find -cmin 1`
  - 1일 안에 수정된 파일을 검색하려면 `find -mtime 0`
  - 각각을 확인할때는 `date` 명령어와 `stat fine_name | grep Access(or Change or Modify)` 명령으로 확인

#### 2) 비교적 최신 파일 관련 테스트

- 특정 파일을 기준으로, 해당 파일보다 최근에 동작이 행해진 파일을 찾
- 정리
  - `-anewer file_name`: 명시된 파일보다 최근에 접근한 파일을 찾아줌
  - `-cnewer file_name`: 명시된 파일보다 최근에 변경된 파일을 찾아줌
  - `-newer file_name`: 명시된 파일보다 최근에 수정된 파일을 찾아줌
  - `-newerXY file_name`: 명시된 파일의 속성보다 최근에 수정된 파일을 찾아줌. 파일 속성은 XY로 표시하며, 다음과 같은 속성이 있으며, 속성 B는 리눅스에서 사용할 수 없음.
    - a: 파일 참조의 액세스 시간
    - B: 파일 참조의 탄생 시간
    - c: incode 상태 변경 시간 참조
    - m: 파일 참조의 수정 시간

#### 3) 파일 권한 관련 테스트

- 찾고자 하는 파일 권한에 해당하는 파일을 검색
- 정리
  - `-perm mode`: 명시된 파일 권한과 동일한 파일을 검색
    - `find ./ -perm 660`: 정확히 파일 권한이 660인 파일검색
  - `-perm -mode`: 명시된 파일 권한이 포함된 파일을 검색
    - `find ./ -perm -660`: 파일 권한이 420 등 포함된 경우 검색, 물론 610 같은건 검색이 안된다.
  - `-perm /mode`: 명시된 파일 권한을 소유자, 그룹, 기타로 구분하여 세 개의 권한 중 하나라도 동일한 파일을 검색함
  - `-perm +mode`:더 이상 사용되지 않으며, 대신  `-perm /mode`를 사용
  - `-readable`: 로그인한 사용자가 읽을 수 있는 파일을 검색
  - `-writable`: 로그인한 사용자가 쓸 수 있는 파일을 검색
  - `-executable`: 로그인한 사용자에게 실행 권한이 있는 파일만검색

### 3. 액션

### 4. 위치옵션
