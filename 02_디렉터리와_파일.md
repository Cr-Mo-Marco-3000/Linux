# 디렉터리와 파일

## 1. 파일의 구성요소

- 리눅스 시스템에서는 모든 처리과정을 파일단위로 처리
- 파일의 구성은 계층적인 구조의 특성
- 파일의 세 가지 요소 => 모두 충족해야만 파일로 인정
  - 파일 이름
  - i-node
  - 데이터 블록



### 1. 파일 이름

- 사용자가 파일을 사용목적에 맞도록 사용하고 해당 파일에 정확히 접근할 수 있도록 구별할 수 있는 변별력을 제공
- 변별력은 파일을 조작하기 위한 과정에서도 활용
- 리눅스 시스템에서 관리하는 모든 데이터는 파일이라는 단일 인터페이스를 가지고 있음
- 리눅스 시스템에서는 파일의 속성을 지정하는 특별한 확장명은 제공되지 않음



### 2. i-node

- index node의 줄인 표현
- 파일을 기술하는 디스크 상에서의 에이터 구조를 의미
- 하나의 파일을 생성하면 하나의  i-node가 생성되고 파일을 구별할 수 있도록 i-node 번호가 부여됨
- 부여된 i-node 번호를 찾고자 할 경우에는 파일의 정보를 통해 알 수 있음
- i-node에 저장된 정보
  - 파일의 종류
  - 파일의 타임스탬프(파일 갱신일)
  - 파일의 소유권 - 사용자(소유자)와 그룹
  - 파일의 액세스 모드



### 3. 데이터 블록

- Data Block은 파일에서 데이터를 저장하는 블록을 의미
- 데이터 블록에는 일반 파일이나 디렉터리 파일의 데이터가 존재
- 디스크 장치에 파일을 저장할 때 실제 데이터는 특별한 구분 없이 디스크에 저장
- 디스크의 어느 한 곳에 차례대로 쌓여 있는 부분을 데이터 블록이라고 함

- 개념
  - 블록 그룹은 블록들의 모임을 의미
  - OS 커널이 같은 파일에 속하는 데이터 블록은 같은 블록 그룹에 저장하는 기능을 

- 참고
  - 메타데이터
    - 데이터를 표현하기 위한 데이터

## 2. 리눅스 파일 종류

1. 일반 파일
2. 디렉터리 파일
3. 특수 파일

### 1. 일반 파일

- 데이터를 관리하는 데 주로 사용되는 일상적인 파일

- 실행, 텍스트, 이미지, 프로그램 소스 파일 등

- 데이터가 바이너리 형태로 저장

- 일반 파일을 정규 파일이라고도 하며 정규 파일은 포준 입출력 시스템의 호출을 통해 참조됨

  

### 2. 디렉터리 파일

- 리눅스 시스템에서는 **디렉터리 역시 파일**로 취급되며 디렉터리 파일은 해당 디렉터리에 저장된 파일이나 하위 디렉터리의 정보를 가짐
- 디렉터리는 일반 파일과 마찬가지로 디스크에 저장되어 다른 파일을 조작하고 액세스하는데 필요한 정보를 보유
- 디렉터리라는 파일을 이용해서 전체 파일을 하나의 **트리 구조**로 관리



### 3. 특수 파일

- 리눅스가 지원파는 파이프, 소켓, 주변장치(디바이스)를 의미
- 디바이스는 윈도우 운영체제에서 하드디스크가 C:, D:, e:등으로 표시되지만 리눅스 시스템에서는
- 파일의 영역은 키보드, 모니터, 마우스, 디스크 드라이브 등과 같이 컴퓨터의 모든 자원이 특수 파일로 사용되고 다루어짐



## 3. 디렉터리와 파일 관리

### I. 디렉터리 명령어

- 파일 목록 보기

  - `ls`

  - list

    

- 현재 작업중 영역 디렉토리 출력

  - `pwd`
  - print working directory

- 디렉터리의 종류

  - /usr
    - 실행파일, 라이브러리 파일 존재하는 디렉터리

  - /mnt
    - mount
    - 임시로 올렸다 내려놓음
  - /bin
    - 명령어들이 존재하는 곳
    - `which 명령어` 로 찾아보면 나옴
  - /root
    - 관리자의 폴더가 위치하는 곳

- 작업 디렉터리
  - 사용자가 리눅스 시스템에 접속하여 현재 사용하고 있는 디엑터리를 의미
  - 현재 작업 중인 디렉터리는 점(.)으로 표시되고 현재 작업 중인 디렉터리의 위치를 상세하게 확인하기 위해서는 pwd 명령을 사용
- 홈 디렉터리
  - 각 사용자에게 할당되는 디렉터리로 사용자 계정을 처음 만들때 생성
    -  경로
      - home/사용자이름/
  - 홈 디렉터리의 표시는 틸드(~)를 사용하여 guest_01의 홈 디렉터리는 guest_01~과 같이 표시됨

- 절대경로와 상대경로
  - 리눅스 시스템에서 제공하고 있는 경로는 특정파일이나 디렉터리의 위치를 나타내 줌
  - 경로의 구분자는 슬래시(/)를 사용하여 구분되도록 표기
  - 리눅스에서 제공되는 디렉터리의 구조는 트리 형태로 구성되어 있기 때문에 경로에 대한 이해 필요
  - 경로 표기방법에는 절대경로와 상대경로 표기방법 제공

- 절대경로
  - 루트부터 시작
  - /mnt/cdrom
- 상대경로
  - 내 위치 `.`
  - 상위 폴더 `..`
  - ../../mnt/cdrom

- 파일과 디렉토리명 생성 규칙
  - `/` 사용 불가
  - `-` `_` `.` 만 사용 가능
  - 대소문자 엄격히 구분
    - 윈도우에서는 구분 안됨



### 디렉터리 관리 명령어

- cd
  - 디렉터리 이동
  - 절대경로, 혹은 상대경로로 이동
  - 그냥 cd만 입력했을 때, 혹은 cd ~를 입력했을 때 root 또는 홈 디렉터리로 이동
  - `cd 디렉터리 경로`
- pwd
  - print working directory
- ls
  - 디렉터리 확인
  - 특정 경로 입력 시 해당 경로 확인 가능 
  - ls 파일명
    - 해당파일 존재 유무
  - 옵션
    - 옵션들은 조합 가능
    - -a
      - 숨겨진 파일 포함(파일 앞 .), 모든 파일 리스트 출력
    - -i
      - 첫 번째 열에 i-node 번호를 출력
    - -F
      - 파일의 종류를 실행파일은 '*', 디렉터리는 '/', 심볼릭 링크는 '@' 표시
    - -l
      - 상세한 정보를 출력

- 디렉터리 생성
  - mkdir
    - make directory
  - 옵션
    - -p
    - 깊은 경로의 폴더를 만들 경우, 중간에 존재하지 않는 폴더도 같이 만듦
  - 여러 개의 폴더를 만들때는 띄어쓰기로 구분
- 디렉터리 삭제
  - rmdir
    - 근본적으로 폴더 삭제와 파일 삭제는 구분됨
    - 그러나 비어 있는 디렉터리만 삭제 가능
  - `rm -r`
    - `rm`은 파일을 관리하는 명령어이지만, `-r`을 붙임으로써 비어 있지 않은 디렉터리 삭제
    - 그냥 `rm`은, 디렉터리 삭제 불가능

### 링크 파일

- 리눅스와 유닉스에서 자주 사용되며 사용자에게 편리성을 제공 해 주는 파일
- 링크라는 개념을 도입해 여러 개의 이름이 하나의 I-node에 연결되도록 수행하여 실제 파일이나 디렉터리 혹은 다른 링크를 가리킴
- 파일에는 하드 링크와 심볼릭 링크가 존재하며 링크 파일을 생성하기 위해서는 ln 명령어를 사용
- 하드 링크와 심볼릭 링크



#### 심볼릭 링크

- 리눅스 시스템에서 통상적으로 사용되는 링크 파일이 바로 심볼릭 링크 파일이며 다른 표현으로는 소프트 링크라고도 함
- 윈도우 운영체제의 바로 가기 기능이나 단축 아이콘과 같은 역할 수행



#### 하드 링크

- 원본 파일을 복사하여 원본 파일과 동일한 내용의 다른 사본 파일을 만드는 것을 의미
  - 동일한 i-node를 갖는 파일을 생성하는 것을 의미
- 윈도우에서의 복붙과는 다름
  - 완벽한 분리가 이루어지지 않는다

- ln
  - 링크 만들기
  - -s
    - 심볼릭 링크
    - 대문자랑은 다름
  - 하드링크인지 확인
  - ![image-20230110110959329](C:\Users\User\Desktop\02_디렉터리와_파일.assets\image-20230110110959329.png)
    - ls -i
    - 동일한 i-node일경우 하드링크, 다를 경우 심볼릭 링크
    - 3번째 열 번호는 원본 + 하드링크 파일의 개수
    - -F로도 확인 가능



## 파일관련 명령어

### touch

- 생성
- 똑같은 이름으로 만들 경우 새로운 파일로 엎어쓰기가 된다.
- 옵션
  - 시간을 표현하는 여러 가지 옵션들이 존재한다
  - -t
    - 시간을 직접 입력
  - -a
    - 

### grep

- 파일의 내용을 검색



cp

- 파일을 복사
- `cp 복사할대상경로및이름 복사본저장경로및이름`
- -d
  - symbolic link를 그대로 복사하겠다는 것

- -f
  - 복사하고자 하는 파일 이름이 겹치거나 할 경우 강제적으로 수행하는 옵션
- -l
  - 하드 링크 형식으로 복사

- -i
  - 복사될 파일명이 이미 존재하는 파일일 경우 덮어씌울 것인지 물어봄
  - cp라는 명령 내부에 기본적으로 포함되는 경우가 있지만, 그렇지 않은 경우도 있기 때문에 사용하는 것이 좋다
- -s
  - 심볼릭 링크를 생성
- 여러 개의 파일 복사
  - `cp 복사할파일1 복사할파일2 복사본저장경로`
- -r
  - 디렉터리 안에 있는 모든 하위 디렉터리 파일까지 복사

cat

- 파일 내부 모두 읽기
- 옵션
  - -n
    - 번호 붙이기

find

- 찾기
- `$ find /usr -name filename`
  - 찾는다, 어디에서, 무엇을

- 옵션
  - **-name**
    - 이름으로 검색
  - **-type**
    - 파일 타입으로 검색
    - d
      - 디렉터리 
    - f 
      - 파일
    - l
      - 심볼릭 링크
  - size
    - c
    - k
    - w
  - -user
    - 로그인 아이디로 사용자가 소유한 모든 파일 검색
  - -perm
    - 지정한 접근권한과 일치하는 파일 검색

- 파일 이름이 h로 시작하는 것 찾기
  - `find /etc -type f -name 'h*'`

- more
  - 화면 단위로 파일 내용 출력
  - space
    - 페이지 넘기기
  - enter
    - 한 목록씩 넘기기
  - q
    - 프롬프트로 나가기
- head
  - 파일의 주요한 내용과 설명을 head에 많이 넣어 놓기 때문에, 실행 전 많이 사용하는 명령어
  - 제일 처음 10줄만 출력하기

- tail
  - 제일 마지막의 10줄만 출력하기

- grep
  - 문자열 및 정규표현식으로 검색 및 출력
  - global rep
  - grep -i 문자열 경로
  - `grep -i DHCP /etc/services`
  - 여기에서는 따옴표를 쓸 필요가 없다
    - 자체적으로 문자열을 넣기 때문
  -  ctrl + f와 비슷
  - 옵션
    - -i
      - 대소문자를 구별하지 않고 출력
    - -n
      - 찾으려는 문자열이 속해있는 행의 번호를 함께 출력
- 고정된 경로에서 특정 명령 검색
  - whereis
  - which
    - 경로 + alias(명령어 = 명령어의 실제 의미)
    - 예를들어 `which cp`
- mv
  - 이동
  - cp와 문법이 같다.
  - 얘도 -i 옵션 기본 포함하는 경우 있음
  - 이름 바꾸는 기능도 있음

- rm
  - 얘도 -i 옵션 기본 포함하는 경우 있음



## 파일 링크

- 매뉴얼
  - man 명령어
